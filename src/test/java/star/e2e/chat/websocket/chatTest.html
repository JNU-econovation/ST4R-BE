<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>WebSocket Chat & Preview Test</title>
    <link rel="stylesheet" href="chatTest.css">
</head>
<body>
<div class="container">
    <h1>WebSocket Chat & Preview Test</h1>
    <div class="grid">
        <div class="panel">
            <h2>Connection</h2>
            <div id="status" class="status disconnected">Disconnected</div>
            <div class="form-group">
                <label for="serverUrl">Server URL</label>
                <input type="text" id="serverUrl" value="http://localhost:8080/websocket/connect">
            </div>
            <div class="form-group">
                <label for="jwtToken">JWT Token</label>
                <input type="text" id="jwtToken" placeholder="Enter Bearer token">
            </div>
            <div class="form-group">
                <label for="previewDestination">Preview Subscribe URL</label>
                <input type="text" id="previewDestination" value="/member/queue/previews">
            </div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                <button id="connectBtn">Connect</button>
                <button id="disconnectBtn" disabled>Disconnect</button>
            </div>
        </div>
        <div class="panel">
            <h2>Chat Preview</h2>
            <div id="preview-log" class="preview-log">Awaiting preview data...</div>
        </div>
    </div>

    <div class="chat-container panel" style="margin-top: 2rem;">
        <h2>Chat Room</h2>
        <div class="grid">
            <div class="form-group">
                <label for="teamId">Team ID</label>
                <input type="text" id="teamId" placeholder="Enter Team ID to join">
            </div>
            <div class="form-group">
                <label for="memberId">My Member ID</label>
                <input type="text" id="memberId" placeholder="Enter your Member ID">
            </div>
        </div>
        <button id="enterRoomBtn" disabled>Enter Chat Room</button>
        
        <div id="chat-window" class="chat-window">
            <div id="messages" class="messages"></div>
            <div class="message-input">
                <textarea id="messageContent" rows="2" placeholder="Enter message..."></textarea>
                <button id="sendBtn">Send</button>
            </div>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.6.1/sockjs.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
<script src="chatTest.js"></script>
</body>
</html>